"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _createSuper(t){return function(){var e,o=_getPrototypeOf(t);if(_isNativeReflectConstruct()){var i=_getPrototypeOf(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Shape=function t(e,o,i,n,s){_classCallCheck(this,t),this.x=e,this.y=o,this.velX=i,this.velY=n,this.exists=s},Ball=function(t){_inherits(o,Shape);var e=_createSuper(o);function o(t,i,n,s,r,l,a){var c;return _classCallCheck(this,o),(c=e.call(this,t,i,n,s,a)).color=r,c.size=l,c}return _createClass(o,[{key:"draw",value:function(){ctx.beginPath(),ctx.fillStyle=this.color,ctx.arc(this.x,this.y,this.size,0,2*Math.PI),ctx.fill()}},{key:"update",value:function(){this.x+this.size>=width?(this.velX=-this.velX,this.x=width-1.2*this.size):this.x-this.size<=0&&(this.velX=-this.velX,this.x=1.2*this.size),this.y+this.size>=height?(this.velY=-this.velY,this.y=height-1.2*this.size):this.y-this.size<=0&&(this.velY=-this.velY,this.y=1.2*this.size),this.x+=this.velX,this.y+=this.velY}},{key:"collisionDetect",value:function(){for(var t=0;t<balls.length;t++)if(this!==balls[t]&&balls[t].exists){var e=this.x-balls[t].x,o=this.y-balls[t].y;if(Math.sqrt(e*e+o*o)<this.size+balls[t].size)return this.velX=-this.velX,this.velY=-this.velY,balls[t].velX=-balls[t].velX,balls[t].velY=-balls[t].velY,!0}}},{key:"mouseCollision",value:function(){for(var t=0;t<balls.length;t++){var e=this.x-mouseX,o=this.y-mouseY;Math.sqrt(e*e+o*o)<this.size&&(console.log("DistX ".concat(e," DistY ").concat(o)),console.log("MouseX ".concat(mouseX," MouseY ").concat(mouseY)),mouseX=void 0,mouseY=void 0,this.exists=!1,showCount())}}}]),o}();Ball.count=20,Ball.countBalls=function(){return balls.reduce((function(t,e){return e.exists?t+1:t+0}),0)};var width,height,mouseX,mouseY,canvas=document.querySelector("canvas"),ctx=canvas.getContext("2d");function random(t,e){return Math.floor(Math.random()*(e-t)+t)}function init(){width=canvas.width=window.innerWidth,height=canvas.height=window.innerHeight}init(),window.addEventListener("resize",init),canvas.addEventListener("mousedown",(function(t){mouseX=t.clientX,mouseY=t.clientY}));var balls=[];function loop(){for(ctx.fillStyle="rgba(0,0,0,0.25)",ctx.fillRect(0,0,width,height);balls.length<Ball.count;){var t=new Ball(random(0,width),random(0,height),random(-7,7),random(-7,7),"rgb("+random(0,255)+","+random(0,255)+","+random(0,255)+")",random(20,30),!0);t.collisionDetect()||balls.push(t)}for(var e=0;e<balls.length;e++)balls[e].exists&&(balls[e].draw(),balls[e].update(),balls[e].collisionDetect(),balls[e].mouseCollision());requestAnimationFrame(loop)}var paragraph=document.getElementsByTagName("p"),textParagraph=paragraph[0].textContent;function showCount(){paragraph[0].textContent=textParagraph+Ball.countBalls()}loop(),showCount();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5taW4uanMiLCJTaGFwZS5qcyIsIkJhbGwuanMiLCJzY3JpcHQuanMiXSwibmFtZXMiOlsiX3R5cGVvZiIsIm9iaiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsIl9jcmVhdGVDbGFzcyIsIkNvbnN0cnVjdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX2NyZWF0ZVN1cGVyIiwiRGVyaXZlZCIsInJlc3VsdCIsIlN1cGVyIiwiX2dldFByb3RvdHlwZU9mIiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIk5ld1RhcmdldCIsInRoaXMiLCJSZWZsZWN0IiwiY29uc3RydWN0IiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJjYWxsIiwiX2Fzc2VydFRoaXNJbml0aWFsaXplZCIsIlJlZmVyZW5jZUVycm9yIiwic2hhbSIsIlByb3h5IiwiRGF0ZSIsInRvU3RyaW5nIiwiZSIsIm8iLCJzZXRQcm90b3R5cGVPZiIsImdldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiVHlwZUVycm9yIiwiY3JlYXRlIiwidmFsdWUiLCJfc2V0UHJvdG90eXBlT2YiLCJwIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJTaGFwZSIsIngiLCJ5IiwidmVsWCIsInZlbFkiLCJleGlzdHMiLCJCYWxsIiwiX1NoYXBlIiwiX3N1cGVyIiwiY29sb3IiLCJzaXplIiwiX3RoaXMiLCJjdHgiLCJiZWdpblBhdGgiLCJmaWxsU3R5bGUiLCJhcmMiLCJNYXRoIiwiUEkiLCJmaWxsIiwid2lkdGgiLCJoZWlnaHQiLCJqIiwiYmFsbHMiLCJkeCIsImR5Iiwic3FydCIsImRpc3RYIiwibW91c2VYIiwiZGlzdFkiLCJtb3VzZVkiLCJjb25zb2xlIiwibG9nIiwiY29uY2F0IiwidW5kZWZpbmVkIiwic2hvd0NvdW50IiwiY291bnQiLCJjb3VudEJhbGxzIiwicmVkdWNlIiwiYWNjIiwiYmFsbCIsImNhbnZhcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImdldENvbnRleHQiLCJyYW5kb20iLCJtaW4iLCJtYXgiLCJmbG9vciIsImluaXQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xpZW50WCIsImNsaWVudFkiLCJsb29wIiwiZmlsbFJlY3QiLCJjb2xsaXNpb25EZXRlY3QiLCJwdXNoIiwiZHJhdyIsInVwZGF0ZSIsIm1vdXNlQ29sbGlzaW9uIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicGFyYWdyYXBoIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0ZXh0UGFyYWdyYXBoIiwidGV4dENvbnRlbnQiXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsU0FBU0EsUUFBUUMsR0FBbVYsT0FBdE9ELFFBQXJELG1CQUFYRSxRQUFvRCxpQkFBcEJBLE9BQU9DLFNBQW1DLFNBQWlCRixHQUFPLGNBQWNBLEdBQTJCLFNBQWlCQSxHQUFPLE9BQU9BLEdBQXlCLG1CQUFYQyxRQUF5QkQsRUFBSUcsY0FBZ0JGLFFBQVVELElBQVFDLE9BQU9HLFVBQVksZ0JBQWtCSixJQUF5QkEsR0FFblgsU0FBU0ssa0JBQWtCQyxFQUFRQyxHQUFTLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsSUFBSUUsRUFBYUgsRUFBTUMsR0FBSUUsRUFBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsVUFBV0YsSUFBWUEsRUFBV0csVUFBVyxHQUFNQyxPQUFPQyxlQUFl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bUJBQ0FGLElBQUE0QyxTQUFBLEVBQUEsRUFBQXJDLE1BQUFDLFFBRUFFLE1BQUF0RSxPQUFBc0QsS0FBQTZCLE9BQUEsQ0FDQSxJQUFBSSxFQUFBLElBQUFqQyxLQUNBc0MsT0FBQSxFQUFBekIsT0FDQXlCLE9BQUEsRUFBQXhCLFFBQ0F3QixRQUFBLEVBQUEsR0FDQUEsUUFBQSxFQUFBLEdBQ0EsT0FBQUEsT0FBQSxFQUFBLEtBQUEsSUFBQUEsT0FBQSxFQUFBLEtBQUEsSUFBQUEsT0FBQSxFQUFBLEtBQUEsSUFDQUEsT0FBQSxHQUFBLEtBQ0EsR0FFQUwsRUFBQWtCLG1CQUFBbkMsTUFBQW9DLEtBQUFuQixHQUdBLElBQUEsSUFBQXhGLEVBQUEsRUFBQUEsRUFBQXVFLE1BQUF0RSxPQUFBRCxJQUNBdUUsTUFBQXZFLEdBQUFzRCxTQUNBaUIsTUFBQXZFLEdBQUE0RyxPQUNBckMsTUFBQXZFLEdBQUE2RyxTQUNBdEMsTUFBQXZFLEdBQUEwRyxrQkFDQW5DLE1BQUF2RSxHQUFBOEcsa0JBSUFDLHNCQUFBUCxNQUdBLElBQUFRLFVBQUF0QixTQUFBdUIscUJBQUEsS0FDQUMsY0FBQUYsVUFBQSxHQUFBRyxZQUVBLFNBQUFoQyxZQUNBNkIsVUFBQSxHQUFBRyxZQUFBRCxjQUFBM0QsS0FBQThCLGFBSUFtQixPQUNBckIiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbbnVsbCwiY2xhc3MgU2hhcGUge1xuICAgIGNvbnN0cnVjdG9yKHgsIHksIHZlbFgsIHZlbFksIGV4aXN0cykge1xuICAgICAgICB0aGlzLnggPSB4XG4gICAgICAgIHRoaXMueSA9IHlcbiAgICAgICAgdGhpcy52ZWxYID0gdmVsWFxuICAgICAgICB0aGlzLnZlbFkgPSB2ZWxZXG4gICAgICAgIHRoaXMuZXhpc3RzID0gZXhpc3RzXG4gICAgfVxuICAgIFxufSIsImNsYXNzIEJhbGwgZXh0ZW5kcyBTaGFwZSB7XG4gICAgY29uc3RydWN0b3IoeCwgeSwgdmVsWCwgdmVsWSwgY29sb3IsIHNpemUsIGV4aXN0cykge1xuICAgICAgICBzdXBlcih4LCB5LCB2ZWxYLCB2ZWxZLCBleGlzdHMpXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvclxuICAgICAgICB0aGlzLnNpemUgPSBzaXplXG4gICAgfVxuICAgIC8vc3RhdGljIGNvdW50ID0gMjBcbiAgICBkcmF3KCkge1xuICAgICAgICBjdHguYmVnaW5QYXRoKClcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sb3JcbiAgICAgICAgY3R4LmFyYyh0aGlzLngsIHRoaXMueSwgdGhpcy5zaXplLCAwLCAyICogTWF0aC5QSSlcbiAgICAgICAgY3R4LmZpbGwoKVxuICAgIH1cbiAgICB1cGRhdGUoKSB7XG5cbiAgICAgICAgaWYgKCAodGhpcy54ICsgdGhpcy5zaXplKSA+PSB3aWR0aCkge1xuICAgICAgICAgICAgdGhpcy52ZWxYID0gLSh0aGlzLnZlbFgpXG4gICAgICAgICAgICB0aGlzLnggPSB3aWR0aCAtIHRoaXMuc2l6ZSoxLjJcbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2UgaWYgKCh0aGlzLnggLSB0aGlzLnNpemUpIDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMudmVsWCA9IC0odGhpcy52ZWxYKVxuICAgICAgICAgICAgdGhpcy54ID0gdGhpcy5zaXplKjEuMlxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCh0aGlzLnkgKyB0aGlzLnNpemUpID49IGhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy52ZWxZID0gLSh0aGlzLnZlbFkpXG4gICAgICAgICAgICB0aGlzLnkgPSBoZWlnaHQgLSB0aGlzLnNpemUqMS4yXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHRoaXMueSAtIHRoaXMuc2l6ZSkgPD0gMCkge1xuICAgICAgICAgICAgdGhpcy52ZWxZID0gLSh0aGlzLnZlbFkpXG4gICAgICAgICAgICB0aGlzLnkgPSB0aGlzLnNpemUqMS4yXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnggKz0gdGhpcy52ZWxYXG4gICAgICAgIHRoaXMueSArPSB0aGlzLnZlbFlcbiAgICB9XG4gICAgY29sbGlzaW9uRGV0ZWN0KCkge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJhbGxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoICEodGhpcyA9PT0gYmFsbHNbal0pICYmIGJhbGxzW2pdLmV4aXN0cyApIHtcbiAgICAgICAgICAgICAgICBsZXQgZHggPSB0aGlzLnggLSBiYWxsc1tqXS54XG4gICAgICAgICAgICAgICAgbGV0IGR5ID0gdGhpcy55IC0gYmFsbHNbal0ueVxuICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChkeCpkeCArIGR5KmR5KVxuXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgdGhpcy5zaXplICsgYmFsbHNbal0uc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZlbFggPSAtdGhpcy52ZWxYXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVsWSA9IC10aGlzLnZlbFlcbiAgICAgICAgICAgICAgICAgICAgYmFsbHNbal0udmVsWCA9IC1iYWxsc1tqXS52ZWxYXG4gICAgICAgICAgICAgICAgICAgIGJhbGxzW2pdLnZlbFkgPSAtYmFsbHNbal0udmVsWVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBtb3VzZUNvbGxpc2lvbigpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGRpc3RYID0gdGhpcy54IC0gbW91c2VYXG4gICAgICAgICAgICBsZXQgZGlzdFkgPSB0aGlzLnkgLSBtb3VzZVlcbiAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChkaXN0WCpkaXN0WCArIGRpc3RZKmRpc3RZKVxuXG4gICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCB0aGlzLnNpemUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRGlzdFggJHtkaXN0WH0gRGlzdFkgJHtkaXN0WX1gKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBNb3VzZVggJHttb3VzZVh9IE1vdXNlWSAke21vdXNlWX1gKVxuICAgICAgICAgICAgICAgIG1vdXNlWCA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIG1vdXNlWSA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIHRoaXMuZXhpc3RzID0gZmFsc2VcbiAgICAgICAgICAgICAgICBzaG93Q291bnQoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5CYWxsLmNvdW50ID0gMjBcbkJhbGwuY291bnRCYWxscyA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCBjb3VudCA9IGJhbGxzLnJlZHVjZSgoYWNjLCBiYWxsKSA9PiB7XG4gICAgICAgIGlmIChiYWxsLmV4aXN0cykgcmV0dXJuIGFjYyArPSAxXG4gICAgICAgIGVsc2UgcmV0dXJuIGFjYyArPSAwXG4gICAgfSwgMClcbiAgICByZXR1cm4gY291bnRcbn0iLCJjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKVxuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcblxubGV0IHdpZHRoLCBoZWlnaHQsIG1vdXNlWCwgbW91c2VZXG5cbmZ1bmN0aW9uIHJhbmRvbShtaW4sbWF4KSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXgtbWluKSArIG1pbilcbn1cblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB3aWR0aCA9IGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoXG4gICAgaGVpZ2h0ID0gY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodFxufVxuXG5pbml0KClcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGluaXQpXG5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZSA9PiB7XG4gICAgbW91c2VYID0gZS5jbGllbnRYXG4gICAgbW91c2VZID0gZS5jbGllbnRZXG59KVxuXG5sZXQgYmFsbHMgPSBbXVxuXG5cblxuZnVuY3Rpb24gbG9vcCgpIHtcbiAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsMC4yNSknXG4gICAgY3R4LmZpbGxSZWN0KDAsMCx3aWR0aCwgaGVpZ2h0KVxuXG4gICAgd2hpbGUgKGJhbGxzLmxlbmd0aCA8IEJhbGwuY291bnQpIHtcbiAgICAgICAgbGV0IGJhbGwgPSBuZXcgQmFsbChcbiAgICAgICAgICAgIHJhbmRvbSgwLCB3aWR0aCksXG4gICAgICAgICAgICByYW5kb20oMCwgaGVpZ2h0KSxcbiAgICAgICAgICAgIHJhbmRvbSgtNyw3KSxcbiAgICAgICAgICAgIHJhbmRvbSgtNyw3KSxcbiAgICAgICAgICAgICdyZ2IoJyArIHJhbmRvbSgwLDI1NSkgKyAnLCcgKyByYW5kb20oMCwyNTUpICsgJywnICsgcmFuZG9tKDAsMjU1KSArICcpJywgXG4gICAgICAgICAgICByYW5kb20oMjAsMzApLFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICApXG4gICAgICAgIGlmICghYmFsbC5jb2xsaXNpb25EZXRlY3QoKSkgYmFsbHMucHVzaChiYWxsKVxuICAgIH1cblxuICAgIGZvciggbGV0IGkgPSAwOyBpIDwgYmFsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGJhbGxzW2ldLmV4aXN0cykge1xuICAgICAgICAgICAgYmFsbHNbaV0uZHJhdygpXG4gICAgICAgICAgICBiYWxsc1tpXS51cGRhdGUoKVxuICAgICAgICAgICAgYmFsbHNbaV0uY29sbGlzaW9uRGV0ZWN0KClcbiAgICAgICAgICAgIGJhbGxzW2ldLm1vdXNlQ29sbGlzaW9uKClcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcClcbn1cblxubGV0IHBhcmFncmFwaCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwJylcbmxldCB0ZXh0UGFyYWdyYXBoID0gcGFyYWdyYXBoWzBdLnRleHRDb250ZW50XG5cbmZ1bmN0aW9uIHNob3dDb3VudCgpIHtcbiAgICBwYXJhZ3JhcGhbMF0udGV4dENvbnRlbnQgPSB0ZXh0UGFyYWdyYXBoICsgQmFsbC5jb3VudEJhbGxzKClcbn1cblxuXG5sb29wKClcbnNob3dDb3VudCgpIl19
